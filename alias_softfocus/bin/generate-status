#!/usr/bin/env bash
set -euo pipefail

if [[ $# -lt 1 ]]; then
  echo "Usage: generate-status <RUN_ID>"
  exit 1
fi

RUN_ID="$1"

# Minimal valid governance signal
export RUN_ID
export SCENARIO_ID="TS-CONTENT-VALIDATE-001"
export TARGET="content"
export CONTENT_TYPE="system"
export RULE="pre-product-gate"
export RESULT="pass"
export SEVERITY="PASS"
export DETAILS="{}"

ROOT_DIR="$(cd "$(dirname "$0")/../.." && pwd)"

node "${ROOT_DIR}/backend/scripts/content-validator/emit-run-jsonl.js" >/dev/null

echo "PASSED: alias status generated for run ${RUN_ID}"
