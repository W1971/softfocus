# TEST GOVERNANCE POLICY — SoftFocus

Version: 1.0  
Status: ACTIVE  
Audience: Core maintainers, auditors, CI systems

---

## 1. Назначение

Данный документ определяет обязательную governance-политику выполнения тестов
в проекте SoftFocus.

Цель политики:
- обеспечить трассируемость всех решений;
- гарантировать воспроизводимость тестов;
- исключить незафиксированные или недоказуемые результаты;
- создать машиночитаемую базу для аналитики и аудита.

---

## 2. Обязательные принципы (Invariants)

1. Все тесты **обязаны** логироваться.
2. Логи являются **append-only**.
3. Каждый тестовый запуск имеет **уникальный RUN_ID**.
4. RUN_ID используется как **неизменяемый идентификатор аудита**.
5. Тесты **не имеют права**:
   - изменять прошлые RUN’ы;
   - редактировать существующие логи;
   - выполняться без логов.
6. Отсутствие логов считается **нарушением governance-политики**.

---

## 3. Типы логов (обязательные)

Каждый тест **обязан писать оба лога**:

### 3.1 Человекочитаемый лог
- Путь: `tests/runs/<RUN_ID>/run.log`
- Формат: plain text
- Назначение: аудит, ручной разбор, объяснимость

### 3.2 Машинный лог (JSONL)
- Путь: `tests/runs/<RUN_ID>/run.jsonl`
- Формат: JSON Lines (1 объект = 1 строка)
- Назначение: дашборды, аналитика, риск-анализ

---

## 4. RUN_ID

RUN_ID:
- генерируется при старте теста;
- уникален в пределах репозитория;
- соответствует одной директории `tests/runs/<RUN_ID>`;
- никогда не переиспользуется.

---

## 5. Тестовые сценарии

Тестовый сценарий:
- является shell-скриптом;
- обязан использовать официальные логгеры;
- считается **недействительным**, если не записал оба лога.

Пример допустимого сценария:
- TS-READY-BASE-001

---

## 6. Контракт проверки

Каждый тестовый запуск **обязан пройти** проверку логов через:

tests/helpers/verify-test-logs.sh
Невыполнение контракта = FAIL всего тестового запуска.

---

## 7. Governance-результат

Данная система позволяет:
- доказывать управляемость релизов;
- восстанавливать историю решений;
- анализировать риски во времени;
- автоматизировать контроль без потери человеческого надзора.

