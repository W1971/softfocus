# SoftFocus — Governance тестирования

Version: v1.0  
Status: ACTIVE  
Audience: Core maintainers, auditors, CI systems  
Locale: RU  

---

## 1. Назначение

Данный документ определяет **обязательную governance-политику выполнения тестов**
в проекте SoftFocus.

Цель политики:

- обеспечить трассируемость всех решений;
- гарантировать воспроизводимость тестов;
- исключить незафиксированные или недоказуемые результаты;
- создать машиночитаемую базу для аналитики и аудита.

---

## 2. Обязательные принципы (Invariants)

1. Все тесты **обязаны** логироваться.
2. Логи являются **append-only**.
3. Каждый тестовый запуск имеет **уникальный RUN_ID**.
4. RUN_ID используется как **неизменяемый идентификатор аудита**.
5. Тесты **не имеют права**:
   - изменять прошлые RUN’ы;
   - редактировать существующие логи;
   - выполняться без логов.
6. Отсутствие логов считается **нарушением governance-политики**.

---

## 3. Типы логов (обязательные)

Каждый тест **обязан** записывать **оба** типа логов.

---

### 3.1 Человекочитаемый лог

- Путь: `tests/runs/<RUN_ID>/run.log`
- Формат: обычный текст
- Назначение:
  - аудит;
  - ручная инспекция;
  - объяснимость решений.

---

### 3.2 Машинный лог (JSONL)

- Путь: `tests/runs/<RUN_ID>/run.jsonl`
- Формат: JSON Lines (один JSON-объект на строку)
- Назначение:
  - построение дашбордов;
  - аналитика;
  - анализ риска;
  - корреляция релизов и override-решений.

---

## 4. RUN_ID

RUN_ID:

- генерируется при старте теста;
- уникален в пределах репозитория;
- соответствует одной директории `tests/runs/<RUN_ID>`;
- никогда не переиспользуется.

RUN_ID является **первичным ключом аудита**.

---

## 5. Тестовые сценарии

Тестовый сценарий:

- является shell-скриптом;
- обязан использовать официальные логгеры;
- считается **недействительным**, если не записал оба лога.

Пример допустимого сценария:

- `TS-READY-BASE-001`

---

## 6. Контракт проверки

Каждый тестовый запуск **обязан пройти** проверку логов через:

tests/helpers/verify-test-logs.sh       
Невыполнение данного контракта означает:

- FAIL тестового запуска;
- нарушение governance-политики.

---

## 7. Связь с классификацией READY

Каждый тестовый RUN **обязан** завершаться классификацией готовности:

- READY FOR DEPLOY
- LOW RISK
- STRUCTURAL FAIL

Классификация:

- фиксируется в `run.log`;
- фиксируется в `run.jsonl`;
- используется CI для разрешения или блокировки релиза.

---

## 8. Человеческие решения (Human Override)

- Human override **допустим только** для состояния LOW RISK.
- Override всегда:
  - выполняется человеком;
  - явно зафиксирован;
  - включён в аудит.
- STRUCTURAL FAIL **не допускает** override.

---

## 9. Governance-результат

Данная система позволяет:

- доказывать управляемость релизов;
- восстанавливать историю решений;
- анализировать риски во времени;
- автоматизировать контроль без потери человеческого надзора.

---

## Финальное положение

Governance тестирования является
**обязательной частью системы SoftFocus**.

Любое отклонение от данной политики
считается нарушением архитектурных требований.

